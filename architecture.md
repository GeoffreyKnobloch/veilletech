# Architecture d'un système

## Méthodes d'architecture

Source : [https://www.meetup.com/fr-FR/Software-Craftsmanship-Lille/events/249186561/?comment\_table\_id=490604179&comment\_table\_name=event\_comment](https://www.meetup.com/fr-FR/Software-Craftsmanship-Lille/events/249186561/?comment_table_id=490604179&comment_table_name=event_comment)

Meet-up Arch Kata du 21/04/2018

[http://nealford.com/katas/list.html](http://nealford.com/katas/list.html)

![](https://lh3.googleusercontent.com/MaMRAu4D7UC2lHZxqPZ-W03OkeqezNlt4pBDh5PCoxou4zFK2LiAD-rwBmv2AnO3axRV6XzUAPOYU7RjrLWpfoTcygIRExS1-1vlnFdsBoqeC19cEjunzPnzvfYmhrfRN9WHxmkeKWgdKKAZjCILE3XQo3WuU_w3otbXJawcodu6n0Qj8UIYbRsWtzmSqxMJTATzsmgk6UBV5xc03I4nI6e2XIAQAz4at0SdXD5kvFTzZ0EuXeJJtogMLWTYI4z3ncIWW1rqhhIgrQmZRQ7Jr0qkixccGXwn8BonpEoQNcqHCeD45TFsqa59Nu-7UTWIWjSG8FaomJxywgWtcHGH_aoYSaRKd5YTvK02TTgpjEly8GvScb4J5Ls-q8y3TDXRndRdu4VIO8CNL-bKI9olXdQjEWAHStTUJ6Gn2TcEdubBep1Ca80iO4bJFQIZExd2YOxTlUcKfffrBOUxoO-05r-4NBT57FyYCDylKewPFaJeZBPFRx_LFP_OzkUC-So8iCYOeSDOt8IVrKamcT3LRA8uUnq1eNUn4D1lrLzC6zOkfiWqP7Fn_o-UKgncLAxtlGSyWOArETGw7lUWKmmQkarQm-EfscX2FILXq9xcCoVX32ydJDCBfKaAevQf_2qPxAeKPli60tpwdV_Ao3ImG7c0rH7YuoYI=w836-h626-no)

![](https://secure.meetupstatic.com/photos/event/3/6/0/5/highres_470353829.jpeg)

Parce que sans mèthodologie, on arrive à ... :

![](https://lh3.googleusercontent.com/0LEysC3ymt_BPcHuS9s5YWaC07Ltzfq6lkewzl4w3azKW4ESF74nZP5fawjNe8bVA8gPBUcSDd_bAlsLMuXMS7S1YFGGuWUKNN1Mtm_sIXFlWwWD17kudZJoxss0_ddh7RNn9QRlmgWdLP33aJM-TPRaiEYjKY2S4n9MM0mZXnQUurvrbA6TYUa8byEK63-vWWm7tcuieAAchru8IvoqVKO--k6fa5kbC7KiCi8spG2CTxyat_7shPyOHTJ6e-GoaZXxV6l4BIVoFGQyZo-p_Bw61zP8tfDG6YJM6VKYQjNUWywNUmmuxqyoNfhFLEUE_PUNHxt0YRE5Hd9iOWy5km1OlzKVAaI_6IQ_71ads3js7IsuRdOsb4FyOvNM2klorF5F-R0gJeSsNBjQhKRHT6Kdgxo62VTgqLw5g1GuvaBPEaUozfKIEmmtA1iP8xVSIisq8f0tNy3HkViit12e2qCMizaD2GKr5fs74EVZGgw7TPNpD8e0nwpbdGauBLw5Saxgz7KmPiRyD16CJ3JlDdDGknZ9ad5yvkUVTfnEXH-_xaXxcgaqWSt6FJQX67UVwRdaXETv4Gv9Qh1EJIE5Lq7qjqWbdWJ6GKStLhOc-c047GTISxjJ90T_saIUin3u5aq5eJk14yOuGlJKEQ6laZ32qR5V1wlJ=w836-h626-no)

Des méthodes permettent de faire participer l'équipe à l'architecture du système.

## La méthode des 4Cs :

Source : [https://c4model.com/](https://c4model.com/)

![](https://lh3.googleusercontent.com/IWctz3TIaPkwXyqc0HmLrK6JZnEN2TTsqreifzjEyNxxRGViIeOGEfWZX_Lnl8Ag3ARvIKNZzvS98pdaes1F8pDXYpNr36gaPvbd9-GsRDh7Q5PipR3lGpjvCGxaOsZmCujqzgt4xu5VK-1INBXEAY84UAHlFTD9jZ8Q3jVRvdKjkne8yB0GbERhhnF9zQD4LxosoEnCdO3I2R2biRWFyNstSGZ19c4j1VNIbF8RoifspYczNxuEDkU3yLHNqkBqAuOWzy-z70-Nsr80RkvLAhq6jq9O22uYkFQcSwt99bjDDPVT07Eet8g-OywR2Hh0V_1wD8nAEQfQV-bG2Ohe9F6iJ4NAKJyL803gB0i5v5mCOgEU_kVSwFH7Hf9WsblAGMZ7ScTm7dFdcP3CwDn-_bPIFnueikj6odkh8xHNyeNhDcbx_8jDOF34iSDQNhQxMy3As_-ZEgILeASySfHOJwp9VWD8h8H7pJ1yK2oqhrcxly2nE6rTENyjFhqvQsX8A0PjnDQ_myr0-C1ZuOR5rCOr6-DB-eoqVN2-uNmNAdfqMzXfrB3BDprcRRX_eunNp34uJzgyoXaQ5FpshnZYorOuvdq0zrs-_19hwoxTWyLRrsk1F0sdzNvlVacbp5Ms-tT7p5wGxqlkVPsvPsw1HyGjgMTelYGX=w836-h626-no)

### Context

En haut : les users

En bas : Les systèmes externes avec lequel le système va interragir

### Containers

Ensemble des containers qui composent le système

### Components

Pour chaque containers, on peut zoomer pour y exposr les components

### Classes

Diagramme de classe des components

## Event storming

Source :

[https://fr.slideshare.net/jeppec/event-storming-48594742](https://fr.slideshare.net/jeppec/event-storming-48594742)

[http://ziobrando.blogspot.fr/2013/11/introducing-event-storming.html](http://ziobrando.blogspot.fr/2013/11/introducing-event-storming.html)

![](https://lh3.googleusercontent.com/aFYcyQqvKq0T_A00Ir_lZpGupem8ieRkbpuxNga8D62zhR8wbvMhUjLrBYOedrvT7qX_JNvwgQxsJLM5f8wbg8HmLQP7RETV7BdKoD8Nr8MqXVt7duD2YdM7WkHntDMemGBUI_0wVEXTvWgwZczrO8TcZ1uom4v_eNMLG0eb9yosjcRJ53CEY_72LMVJ-KmJoZJu1GByYXXE9ldtUdq0JpRBu0ELdqy7VjJEf4g9pySDA5rrKgIhPXXWfLGyg16jY6dwqo6U5mufFwCJWdK2r0v7PMUiH5GgSDcLy0WJy8H3bL4Fy6dPVmQ3NH0nrv76Qi8BvIwxyoXxc4UVPbESEdVPY4eaBECs15e8c8cq7az8CMVBe3n5ncdwmGVv04edSyg8teDKwRE3BK8cI9h-o4VjQ3Z1-mYkq4KsSWQrmCd_rI2cXrdW3ImGEOchkrEayzxZnKVJi9i2mzGa-GJsOcl8Jy4hPCVn44IxR7MPFIHrNY5ksnZe13smf4v00SX4VUdrtrEtNw8kWiJEbOoUoi1KEyhObO9XEweX7FjeQW3ks2o0G-2bxKwspfLfT2ynWEmAHXy2lSh3qzrWUQ54cRpyQI7ikuR_jJ0B4uSCatZDyXjwOXWFwrjrtuJi2mEFUq5EACgat3llPJVnbqscre3wTlJ1aruN=w626-h836-no)

Permet d'approfondir l'attendu fonctionnel en raisonnant en terme d'événements :

3 types de post-it :

* Commande : Un verbe, Exemple : Parler
* Event : Un événément passé, exemple : A reçu un message
* Agregats : Un objet dont l'état est changé par un événement.

Exemple :

![](https://lh3.googleusercontent.com/hi1-cB_r2KJiWns1trwxZZ9P52tJIWjbzHKDpNUJywmu0rjXymS4oAtFlDcYV6s-MOannIuobGJXoEWCoyq2npXd4NRoRp43gwV0iK7x4JQmCGTE9lpNTGFQn_RYB_ivoDj0eCRVCd681Bc-OQVvF09cJUlFaQKWbzSeyclJwFRDddH-7UId2l4-nwGWN6CN828AZDuf9LnORujHWXMw8uDxYAn15npU1tB4r28kBmexJEoLoJpjVH2xu4Qgl2f38k6zPoKApPj7uv0uro4dJ7LjgaS_lw2oF8Pha59P28wGeYDTK-zFtMYHEJRpCvd3E3bywOzvb1EYcy6jt0faho2MI6GrIScMyNMXTUwmsKX5plcN1R5_X1B4IRTarSDZmhMp1u_MvnqZfr4S70BRBg6dfuvggMzwOoWGzL1KTG-l7qqWs4-N1zqRU3RCHBNxWLo6QPxlfo7_U5zwXYa_r_dGUuiPmQtxizM3zWEnhyQbh4gc8j3ULqtJRUa8TEdVtTnw1bPA56DK_ddqK_eg5Eha04uJMU8q6m65bKcGpPXho7mdleTLKU6_GGkwoqR78YF9ORGzGJ7-0cpzesctBjrzcCskkO80yf0wOU5FVZsH6i8isjtH1Ib24ZsPOWyvHies9lSEFNGPi6Eng8kzowYE2MW4x5wz=w836-h626-no)

## ![](https://lh3.googleusercontent.com/71W8nXH7Oc-CHiW7jzQ8DDpM4C1ACd0ab5bLDVRutMiqBNwpbGVDp4g2gFwhEYuB8zLOjm7b2cZFPVsm2Gm3WC2rhDPvXeAUYvihhPjAK2l-YH2oC1_9M-ByKrebpO5o4oA9SYKU2cmMOhuoDFugsYRFVF7WUoBy8Sbl6k6bZv65xbd2J4WpxngCn9pNzWROC-O7_AEouEI_UQVUtTOdympVjjHpdbhdIPGk0pVSU_GeyemsnWO5rRxLgL6UaCTxDphs8tQSm89MD24S-TwkWcylSh7FDWc2Qbrq4AC7cKl6C8-eGyGkvnwFiN4oc5o4ieas-tz218GDDQV1NQS0rdgaIMFX-zkxApqlRNWATOZ7_Gvk-tKkT3-VHBtrO3Ai2lD_LFPwG6hFrXXy4f1IwDWAVHXnwfORmLblmnlBLmof40HxMLmRjmh3Cd-9nnCG2RmvZOqFpvJIxZfZyEJ3oMstrkohPaaNI9cEA29KwwuhuVhgOvMFm_1iocV4l8w52rS9tFe1N4xcP3Wkn_ZBYrTu69Il3QeyRsAsliGfvTjflomr4_e1mzQIuoPA9hs2MzUNF0CJHQ0plCYXmolpNwgLu8d75Etv9HsWkdn6Tj8kTSrx5a08sMhQYBhcaBnstsIFRelOc8rHRB4YriFPQD5tvPnoo6Erwg=w1234-h925-no)

## Architecture en APIs

Une architecture qui semble pertinente :

### Autant d'API que de thème métier

Exemple du retail :

![](/assets/screencapture-developers-kiabi-fr-2018-04-10-11_20_52.png)

### ![](/assets/screencapture-developers-kiabi-fr-2018-04-10-11_20_52.png)Pour chaque API, architecture "MC" sur un seul projet

Model :

* Ensemble de BOs correspondants au métier de l'API qui correspondent aux tables de la bdd.
* Ensemble de DTOs correspondants chacun à un BO. \(n DTOs pour un BO\). \(un BO peut être un DTO\)
* 3 tiers : \(n\) DAO - \(1\) Service \(1\)  - \[Sur le controller \(1\) WebService\]
* DAO va appeler en base et fournir des Bos
* Service va appeler le DAO et me fournir des DTOs
* WebService exposé dans le controller va simplement appeler le service

Controller :

* Prend en charge les requêtes GET POST ... contenant les URL et appelle : Expose les webservice

View :

* Pas besoin de view : nothing to Json ou Json to better Json

## Architecture Micro Service

Source : [https://blog.octo.com/larchitecture-microservices-sans-la-hype-quest-ce-que-cest-a-quoi-ca-sert-est-ce-quil-men-faut/](https://blog.octo.com/larchitecture-microservices-sans-la-hype-quest-ce-que-cest-a-quoi-ca-sert-est-ce-quil-men-faut/)

### Vocabulaire

Service : Un service métier : Un groupe de services techniques \(REST, SOAP\) qui fournissent une fonctionnalité qui a un sens métier.

Projet : Un projet de développement informatique sur l'ensemble de son cycle de vie. \(Pas seulement sur sa phase Projet, avant son basculement en mode Maintenance\).

Monolithe : Une grosse application qui gère l'UI / Component / Layers / Class. L'invers de l'architecture Micro-Service.

Source : [https://www.c-sharpcorner.com/article/monolithic-application-design/](https://www.c-sharpcorner.com/article/monolithic-application-design/)

Celle-ci a l'avantage d'être facile à déployer, mais rencontre les problèmes de couplage verticaux \(UI / Component / Layer / class\) et horizontaux \(entre plusieurs Component qui intéragissent\)

### Constat

Plus le projet est gros, plus il est difficile de le maintenir, de le faire évoluer sans effet de bord. Même si l'architecture logicielle est bonne, il apparaît avec le temps des rustines, les fonctionnalitées métier deviennent de plus en plus complexe.

### L'architecture microservices

Pour éviter le problème des gros projets, il suffit de n'avoir que des petits projets : une réponse simple et radicale.

On limite donc la taille des projets à quelques personnes pour n'avoir que des Pizza teams d'une taille maximale de 7 personnes tout compris.

Il ne s’agit pas de séparer les gros projets en sous-équipes mais bien de projets _indépendants _: chacun a son organisation, son calendrier, sa base de code et ses donnée.

Les échanges entre les projets se font par des services. \(REST / JSON\).![](https://blog.octo.com/wp-content/uploads/2015/10/microservices-1024x464.png)

On a beaucoup de petits projets, découpés en Petits domaines métiers, plutôt que des gros projets, découpés en gros domaines métiers.

Exemple de soundcloud :[http://philcalcado.com/2015/09/08/how\_we\_ended\_up\_with\_microservices.html](http://philcalcado.com/2015/09/08/how_we_ended_up_with_microservices.html)

## Clean Architecture

Source : [https://www.dotnetrocks.com/?show=1538](https://www.dotnetrocks.com/?show=1538)





